!function(t,e){e.registerElement("app-route",{prototype:Object.create(HTMLElement.prototype)}),e.registerElement("active-route",{prototype:Object.create(HTMLElement.prototype)});var i=Object.create(HTMLElement.prototype),r={},n={before:[],routeChangeStart:[],after:[]};i.attachedCallback=function(){"manual"!==this.getAttribute("init")&&this.init()},i.init=function(){this.isInitialized||(this.isInitialized=!0,this.activeRoute=e.createElement("app-route"),this.previousState="",this.stateChangeHandler=function(){this.previousState!==t.location.href&&(this.previousState=t.location.href,this.go())}.bind(this),t.addEventListener("popstate",this.stateChangeHandler,!1),t.addEventListener("hashchange",this.stateChangeHandler,!1),this.hasAttribute("shadow")?this.activeRouteContent=this.createShadowRoot():(this.activeRouteContent=e.createElement("active-route"),this.appendChild(this.activeRouteContent)),this.go())},i.detachedCallback=function(){t.removeEventListener("popstate",this.stateChangeHandler,!1),t.removeEventListener("hashchange",this.stateChangeHandler,!1)},i.go=function(){var e=this.urlPath(t.location.href),i=this.querySelectorAll("app-route");this.fire("before",e);for(var r=0;r<i.length;r++)if(this.testRoute(i[r].getAttribute("path"),e)){this.activateRoute(i[r],e);break}},i.on=function(t,e){return"undefined"!=typeof n[t]&&n[t].push(e),this},i.fire=function(t){if(n[t])for(var e=Array.prototype.splice.call(arguments,1),i=0;i<n[t].length;i++)n[t][i].apply(this,e);return this},i.off=function(t,e){if(n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}return this},i.activateRoute=function(t,e){this.activeRoute.removeAttribute("active"),t.setAttribute("active","active"),this.activeRoute=t;var i=t.getAttribute("import"),r=t.getAttribute("path"),n=t.getAttribute("element"),a=t.hasAttribute("template"),o=!a;this.fire("routeChangeStart",t),o&&i?this.importAndActivateCustomElement(i,n,r,e):o&&!i&&n?this.activateCustomElement(n,r,e):a&&i?this.importAndActivateTemplate(i,t):a&&!i&&this.activateTemplate(t)},i.importAndActivateCustomElement=function(t,i,n,a){if(!r.hasOwnProperty(t)){r[t]=!0;var o=e.createElement("link");o.setAttribute("rel","import"),o.setAttribute("href",t),e.head.appendChild(o)}this.activateCustomElement(i||t.split("/").slice(-1)[0].replace(".html",""),n,a)},i.activateCustomElement=function(i,r,n){var a=e.createElement(i),o=this.routeArguments(r,n,t.location.href);for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);this.replaceActiveElement(a)},i.importAndActivateTemplate=function(t,i){if(r.hasOwnProperty(t)){var n=e.querySelector('link[href="'+t+'"]');n.import?this.replaceActiveElement(e.importNode(n.import.querySelector("template").content,!0)):n.onload=function(){i.hasAttribute("active")&&this.replaceActiveElement(e.importNode(n.import.querySelector("template").content,!0))}.bind(this)}else{r[t]=!0;var a=e.createElement("link");a.setAttribute("rel","import"),a.setAttribute("href",t),a.onload=function(){i.hasAttribute("active")&&this.replaceActiveElement(e.importNode(a.import.querySelector("template").content,!0))}.bind(this),e.head.appendChild(a)}},i.activateTemplate=function(t){var i=e.importNode(t.querySelector("template").content,!0);this.replaceActiveElement(i)},i.replaceActiveElement=function(t){for(;this.activeRouteContent.firstChild;)this.activeRouteContent.removeChild(this.activeRouteContent.firstChild);this.activeRouteContent.appendChild(t),this.fire("after",this.activeRouteContent)},i.urlPath=function(t){var e=t.split("/"),i="/"+e.splice(3,e.length-3).join("/"),r=i.split(/[\?#]/)[0],n=i.indexOf("#");if(-1!==n){var a=i.substring(n).split("?")[0];"#/"===a.substring(0,2)?r=a.substring(1):"#!/"===a.substring(0,3)&&(r=a.substring(2))}return r},i.testRoute=function(t,e){if("ignore"===this.getAttribute("trailingSlash")&&("/"===e.slice(-1)&&(e=e.slice(0,-1)),"/"===t.slice(-1)&&(t=t.slice(0,-1))),t===e||"*"===t)return!0;if(-1===t.indexOf("*")&&-1===t.indexOf(":"))return!1;var i=e.split("/"),r=t.split("/");if(i.length!==r.length)return!1;for(var n=0;n<r.length;n++){var a=r[n];if(a!==i[n]&&"*"!==a&&":"!==a.charAt(0))return!1}return!0},i.routeArguments=function(t,e,i){for(var r={},n=e.split("/"),a=t.split("/"),o=0;o<a.length;o++){var s=a[o];":"===s.charAt(0)&&(r[s.substring(1)]=n[o])}var l=i.indexOf("?"),h="";if(-1!==l){h=i.substring(l);var c=h.indexOf("#");-1!==c&&(h=h.substring(0,c))}var u=i.indexOf("#/"),p=i.indexOf("#!/");if(-1!==u||-1!==p){var v="";v=i.substring(-1!==u?u:p),l=v.indexOf("?"),-1!==l&&(h=v.substring(l))}var f=h.substring(1).split("&");1===f.length&&""===f[0]&&(f=[]);for(var m=0;m<f.length;m++){var d=f[m],g=d.split("=");r[g[0]]=g.splice(1,g.length-1).join("=")}for(var b in r){var A=r[b];r[b]="true"===A?!0:"false"===A?!1:isNaN(A)||""===A?decodeURIComponent(A):+A}return r},e.registerElement("app-router",{prototype:i})}(window,document);