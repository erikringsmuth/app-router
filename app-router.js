!function(t,e){function i(t,i,r){var n=e.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,i),r.dispatchEvent(n)}function r(t,r,a){var u={path:a,route:r,oldRoute:t.activeRoute};i("activate-route-start",u,t)&&i("activate-route-start",u,r)&&(t.activeRoute.removeAttribute("active"),r.setAttribute("active","active"),t.activeRoute=r,r.hasAttribute("import")?n(t,r.getAttribute("import"),r,a,u):r.hasAttribute("element")?s(t,r.getAttribute("element"),r,a,u):r.firstElementChild&&"TEMPLATE"===r.firstElementChild.tagName&&o(t,e.importNode(r.firstElementChild.content,!0),u))}function n(t,i,r,n,s){function o(){r.hasAttribute("active")&&a(t,u,i,r,n,s)}var u;h.hasOwnProperty(i)?(u=e.querySelector('link[href="'+i+'"]'),u.import?o():u.addEventListener("load",o)):(h[i]=!0,u=e.createElement("link"),u.setAttribute("rel","import"),u.setAttribute("href",i),u.addEventListener("load",o),e.head.appendChild(u))}function a(t,i,r,n,a,u){n.hasAttribute("active")&&(n.hasAttribute("template")?o(t,e.importNode(i.import.querySelector("template").content,!0),u):s(t,n.getAttribute("element")||r.split("/").slice(-1)[0].replace(".html",""),n,a,u))}function s(i,r,n,a,s){var u=e.createElement(r),h=i.routeArguments(n.getAttribute("path"),a,t.location.href,n.hasAttribute("regex"),i.getAttribute("pathType"));for(var l in h)h.hasOwnProperty(l)&&(u[l]=h[l]);o(i,u,s)}function o(t,e,r){for(;t.activeRouteContent.firstChild;)t.activeRouteContent.removeChild(t.activeRouteContent.firstChild);t.activeRouteContent.appendChild(e),i("activate-route-end",r,t),i("activate-route-end",r,r.route)}e.registerElement("app-route",{prototype:Object.create(HTMLElement.prototype)}),e.registerElement("active-route",{prototype:Object.create(HTMLElement.prototype)});var u=Object.create(HTMLElement.prototype),h={},l="ActiveXObject"in t;u.attachedCallback=function(){"manual"!==this.getAttribute("init")&&this.init()},u.init=function(){this.isInitialized||(this.isInitialized=!0,this.activeRoute=e.createElement("app-route"),this.stateChangeHandler=this.go.bind(this),t.addEventListener("popstate",this.stateChangeHandler,!1),l&&t.addEventListener("hashchange",this.stateChangeHandler,!1),this.activeRouteContent=e.createElement("active-route"),this.appendChild(this.activeRouteContent),this.hasAttribute("shadow")&&(this.activeRouteContent=this.activeRouteContent.createShadowRoot()),this.go())},u.detachedCallback=function(){t.removeEventListener("popstate",this.stateChangeHandler,!1),l&&t.removeEventListener("hashchange",this.stateChangeHandler,!1)},u.go=function(){var e=this.parseUrlPath(t.location.href,this.getAttribute("pathType")),n={path:e};if(i("state-change",n,this)){if(this.hasAttribute("defaultRoute")&&/^\/?$/.test(t.location.hash))if("/"===t.location.hash&&"ignore"!==this.getAttribute("trailingSlash"));else{var a=this.querySelector('app-route[path="'+this.getAttribute("defaultRoute")+'"]');if(a)return r(this,a,e)}for(var s=this.firstElementChild;s;){if("APP-ROUTE"===s.tagName&&this.testRoute(s.getAttribute("path"),e,this.getAttribute("trailingSlash"),s.hasAttribute("regex")))return r(this,s,e),void 0;s=s.nextSibling}i("not-found",n,this)}},u.parseUrlPath=function(t,e){var i=t.split("/"),r="/"+i.splice(3,i.length-3).join("/"),n=r.split(/[\?#]/)[0];if("regular"!==e){var a=r.indexOf("#");if(-1!==a){var s=r.substring(a).split("?")[0];"#/"===s.substring(0,2)?n=s.substring(1):"#!/"===s.substring(0,3)?n=s.substring(2):"hash"===e&&(n=s.substring(1))}}return n},u.testRoute=function(t,e,i,r){if("ignore"===i&&("/"===e.slice(-1)&&(e=e.slice(0,-1)),"/"!==t.slice(-1)||r||(t=t.slice(0,-1))),r){if("/"!==t.charAt(0))return!1;t=t.slice(1);var n="";if("/"===t.slice(-1))t=t.slice(0,-1);else{if("/i"!==t.slice(-2))return!1;t=t.slice(0,-2),n="i"}return new RegExp(t,n).test(e)}if(t===e||"*"===t)return!0;if(-1===t.indexOf("*")&&-1===t.indexOf(":"))return!1;var a=e.split("/"),s=t.split("/");if(a.length!==s.length)return!1;for(var o=0;o<s.length;o++){var u=s[o];if(u!==a[o]&&"*"!==u&&":"!==u.charAt(0))return!1}return!0},u.routeArguments=function(t,e,i,r,n){var a={},s=e.split("/");if(!r)for(var o=t.split("/"),u=0;u<o.length;u++){var h=o[u];":"===h.charAt(0)&&(a[h.substring(1)]=s[u])}var l=i.indexOf("?"),c="";if(-1!==l){c=i.substring(l);var p=c.indexOf("#");-1!==p&&(c=c.substring(0,p))}if("regular"!==n){var v=i.indexOf("#/"),f=i.indexOf("#!/");if(-1!==v||-1!==f){var g="";g=-1!==v?i.substring(v):i.substring(f),l=g.indexOf("?"),-1!==l&&(c=g.substring(l))}}var d=c.substring(1).split("&");1===d.length&&""===d[0]&&(d=[]);for(var b=0;b<d.length;b++){var m=d[b],A=m.split("=");a[A[0]]=A.splice(1,A.length-1).join("=")}for(var C in a){var E=a[C];a[C]="true"===E?!0:"false"===E?!1:isNaN(E)||""===E?decodeURIComponent(E):+E}return a},e.registerElement("app-router",{prototype:u})}(window,document);